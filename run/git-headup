#! /usr/bin/env node

var hud = require('./lib/hud/hud')

var cwd = require('./lib/hud/cwd')
var git = require('./lib/hud/git')


Promise.resolve(cwd()).then(writeln)
.then(git).then(maybe(writeln))
.catch(console.error)


function write (string)
{
	process.stdout.write(string, 'utf-8')
}

function writeln (string)
{
	write(string + hud.nl)
}

function maybe (fn)
{
	return function (v)
	{
		return v && fn(v)
	}
}
